# Spring Logger Starter

## Содержание
- [Описание](#описание)
- [Проект Spring Logger Starter](#проект-spring-logger-starter)
- [Реализация](#реализация)
- [Пример логов](#пример-логов)
- [Настройка](#настройка)
- [Уровни логирования и форматы](#уровни-логирования-и-форматы)
- [Сборка и запуск](#сборка-и-запуск)

## Описание
В данном репозитории представлены два проекта:
1. **spring-app** - основной проект Spring Boot. Подробное описание можно найти в [README.md](spring-app/README.md) внутри папки `spring-app`.
2. **spring-logger-starter** - проект Spring Boot Starter, предоставляющий возможность логировать все входящие и исходящие HTTP запросы и ответы вашего приложения.

## Проект Spring Logger Starter

Проект `spring-logger-starter` позволяет автоматически логировать все HTTP запросы и ответы, проходящие через ваше Spring Boot приложение. Логирование включает:
- Метод запроса (GET, POST, и т.д.)
- URL
- Заголовки запроса и ответа
- Код ответа
- Время обработки запроса

## Реализация

`spring-logger-starter` реализован как Maven проект для Spring Boot Starter. Логирование осуществляется через фильтр, который перехватывает запросы и ответы. В фильтре определены два метода:
- `logRequest` - для логирования данных запроса
- `logResponse` - для логирования данных ответа

### Пример вывода в формате JSON

**Пример логирования запроса:**
```json
{
  "method": "GET",
  "uri": "/api/resource",
  "headers": {
    "Host": "localhost:8080",
    "User-Agent": "PostmanRuntime/7.26.8",
    ...
  },
  "params": {
    "id": ["123"],
    ...
  }
}
```
**Пример логирования ответа:**
```json
{
  "status": 200,
  "duration": "150ms",
  "headers": {
    "Content-Type": "application/json",
    ...
  }
}
```

## Настройка
Настройка `spring-logger-starter` в проекте `spring-app` в `application.yaml`:
```yaml
api-logging:
  http:
    level: INFO  # Уровень логирования (DEBUG, INFO, WARNING, ERROR)
    format: JSON  # Формат логирования (JSON или TEXT по умолчанию)
```
## Уровни логирования и форматы
- **Уровни логирования:** `DEBUG, INFO, WARNING, ERROR.` Эти уровни зависят от главного уровня логирования приложения. В зависимости от уровня, будут логироваться соответствующие сообщения.
- **Форматы логирования:** `JSON` или текстовый. Можно выбрать, в каком формате будут записываться логи.

## Сборка и запуск
Чтобы собрать и запустить проекты, выполните следующие шаги:

1. Перейдите в корневую директорию проекта и выполните команду:

```bash
mvn clean install
```

2. После успешной сборки, перейдите в папку `spring-app`:

```bash
cd spring-app
```
2. Запустите приложение `spring-app` с использованием `Gradle`:

```bash
./gradlew bootRun
```

Теперь ваш `spring-app` будет использовать `spring-logger-starter` для логирования HTTP запросов и ответов
